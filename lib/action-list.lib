#####################################
# action-list module


forall-appenvs() {
    for def_file in $def_files; do
        for env in $envs; do
            run_actions "$@"
        done
    done
}
forall-envapps() {
    for env in $envs; do
        for f in $def_files; do
            run_actions "$@"
        done
    done
}

run_actions() {
    renderer=""
    skip=false
    action_list="$@"
    source ${def_file}
    init_renderer_${renderer}
    output_dir="${to_dir}/${env}/${appname}"
    if ${skip}; then
        info skipping $appname $env
        return 0
    fi
    for action in ${action_list//,/ }; do
        verbose running $action with ${output_dir} for ${env} ${appname}
        run_action_$action;
    done
}
