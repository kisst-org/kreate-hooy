
init_bash_module_help() {
    add_command aliases "show all defined aliases"
    add_command version "show version of karmah"
}

show_help() {
cat <<EOF
karmah: Kubernetes Application Rendered MAnifest Helper (version $karmah_version)

Description:
  karmah helps to enforce the rendered manifest pattern for targets
  Each target is defined in a karmah file, which defines various options, like:
  - rendering method to use (e.g. helm, kustomize)
  - rendering parameters, e.g. helm charts and value file
  - deployment method, e.g helm intstall, kapp deploy, kubectl apply
  - kubernetes info, e.g. kubeconfig, context and namespace
  - helper info, e.g. how to inspect, scale and change versions

Usage:
  karmah [ option | action | target ]...

EOF
show_short_help
cat <<EOF
Targets:
  Each path defines an application definition, that will be sourced,
  This can either be a file, or a directory that contains exactly 1 file with a name '*.karmah'.
  When one or more --subdirs are specfied, these will be append to the path

Note:
  If multiple commands are given, only last command will be used
EOF
}

show_short_help() {
cat <<EOF
Options:
  -h|--help|help      show more complete help and exit
  -v|--verbose        give more output
  -s|--show-cmd       show the commands being executed
  -q|--quiet          no output
  -n|--dry-run        do not execute the actual commands
  -s|--subdir <dir>   add subdir to list of subdirs (can be comma separated list)
  -t|--to <path>      other path to render to (default is tmp/manifests)
  -w|--with <path>    used for comparison between two manifest trees
  -u|--update <expr>  update source files before rendering
  -a|--action <act>   add action to list of actions to perform
  -m|--message <msg>  set message to us with git commit
Actions:
EOF
for key in $(printf "%s\n" ${!action_help[@]} | sort); do
  printf "  %-14s %s\n" $key "${action_help[$key]}"
done
}


show_help_aliases() {
  echo Aliases:
  for key in $(printf "%s\n" ${!aliases[@]} | sort); do
      printf "  %-13s %s\n" $key "${aliases[$key]}"
  done |sort -k2 -k1
}

show_help_version() {
  echo karmah version: $karmah_version
}
